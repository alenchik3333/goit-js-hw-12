{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\nasync function getPicturesByQuery(query, pageNumber) {\n    const API_KEY = \"45032349-419aa61286db3245b797ba166\";\n\n     const response = await fetch(\n    `https://pixabay.com/api?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&per_page=15&page=${pageNumber}`\n  );\n\n  if (!response.ok) {\n    throw new Error(response.status);\n  }\n\n  return await response.json();\n    \n    \n//   return fetch(`https://pixabay.com/api?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true`).then(\n//     (res) => {\n//       if (!res.ok) {\n//         throw new Error(res.status); \n//       }\n//       return res.json();\n//     }\n//   );\n}\nexport default getPicturesByQuery;","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n// import iziToast from 'izitoast';\n// import 'izitoast/dist/css/iziToast.min.css';\n\nconst galleryEl = document.querySelector('.gallery');\nlet gallery;\nfunction createMarkup(arr) {\n  return arr\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n  <li class=\"gallery-item\">\n  <div class=\"overley-image\">\n    <a class=\"gallery-link\" href=\"${largeImageURL}\">\n      <img\n        class=\"gallery-image\"\n        src=\"${webformatURL}\" \n        alt=\"${tags}\"\n      />\n    </a>\n    </div>\n    <div class=\"info\">\n    <div class=\"info-detail\">\n        <h2 class=\"title\">Likes</h2>\n        <p class=\"text\">${likes}</p>\n    </div>\n    <div class=\"info-detail\">\n        <h2 class=\"title\">Views</h2>\n        <p class=\"text\">${views}</p>\n    </div>\n    <div class=\"info-detail\">\n        <h2 class=\"title\">Comments</h2>\n        <p class=\"text\">${comments}</p>\n    </div>\n    <div class=\"info-detail\">\n        <h2 class=\"title\">Downloads</h2>\n        <p class=\"text\">${downloads}</p>\n    </div>\n  </div>\n  </li>\n  `\n    )\n    .join('');\n}\nfunction drawGallery(images) {\n  if (gallery) gallery.refresh();\n  galleryEl.innerHTML = '';\n  galleryEl.insertAdjacentHTML('afterbegin', createMarkup(images));\n  gallery = new SimpleLightbox('.overley-image a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n}\n\nexport default drawGallery;","import getPicturesByQuery from \"./js/pixabay-api.js\";\nimport drawGallery from \"./js/render-functions.js\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst loading = document.querySelector('.loading');\nconst form = document.querySelector('.search-form');\nconst btnSearch = document.getElementById('search');\n\nlet pageNumber = 1;\n\nasync function onSearch(evt) {\nevt.preventDefault();\n    const input = form.elements.query.value.trim().toLowerCase(); \n    if (input != '') {\n        loading.style.display = 'block';\n    getPicturesByQuery(form.elements.query.value.toLowerCase(), pageNumber).then((responce) => {\n        {\n            if (responce.totalHits === 0) {\n            iziToast.error({\n                    message: \"Sorry, there are no images matching your search query. Please try again!\",\n                    position: 'topRight'\n                });\n        }\n            else {\n                console.log(responce.total);\n            //console.log(responce.hits[0].webformatURL);\n            //console.log(responce.hits[0].likes);\n                drawGallery(responce.hits);\n                form.elements.query.value = '';\n          }     \n        }\n    \n    }).catch(ex =>\n    {\n        console.log(ex);\n        iziToast.error({\n                    message: `Server error: ${ex.message}`,\n                    position: 'topRight'\n                });\n    }).finally(() => {\n        loading.style.display = 'none';\n    })\n    }\n}\n\nbtnSearch.addEventListener('submit', onSearch);\n"],"names":["getPicturesByQuery","query","pageNumber","response","galleryEl","gallery","createMarkup","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","drawGallery","images","SimpleLightbox","loading","form","btnSearch","onSearch","evt","responce","iziToast","ex"],"mappings":"6vBACA,eAAeA,EAAmBC,EAAOC,EAAY,CAGhD,MAAMC,EAAW,MAAM,MACxB,oEAA4CF,CAAK,6EAA6EC,CAAU,EAC5I,EAEE,GAAI,CAACC,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAGjC,OAAO,MAAMA,EAAS,MAWxB,CClBA,MAAMC,EAAY,SAAS,cAAc,UAAU,EACnD,IAAIC,EACJ,SAASC,EAAaC,EAAK,CACzB,OAAOA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IAAY;AAAA;AAAA;AAAA,oCAGwBL,CAAa;AAAA;AAAA;AAAA,eAGlCD,CAAY;AAAA,eACZE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAOOC,CAAK;AAAA;AAAA;AAAA;AAAA,0BAILC,CAAK;AAAA;AAAA;AAAA;AAAA,0BAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,0BAIRC,CAAS;AAAA;AAAA;AAAA;AAAA,GAK9B,EACA,KAAK,EAAE,CACZ,CACA,SAASC,EAAYC,EAAQ,CACvBX,GAASA,EAAQ,UACrBD,EAAU,UAAY,GACtBA,EAAU,mBAAmB,aAAcE,EAAaU,CAAM,CAAC,EAC/DX,EAAU,IAAIY,EAAe,mBAAoB,CAC/C,aAAc,MACd,aAAc,GAClB,CAAG,CACH,CCtDA,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAY,SAAS,eAAe,QAAQ,EAElD,IAAIlB,EAAa,EAEjB,eAAemB,EAASC,EAAK,CAC7BA,EAAI,eAAc,EACAH,EAAK,SAAS,MAAM,MAAM,KAAI,EAAG,eAClC,KACTD,EAAQ,MAAM,QAAU,QAC5BlB,EAAmBmB,EAAK,SAAS,MAAM,MAAM,YAAa,EAAEjB,CAAU,EAAE,KAAMqB,GAAa,CAE/EA,EAAS,YAAc,EAC3BC,EAAS,MAAM,CACP,QAAS,2EACT,SAAU,UAC9B,CAAiB,GAGD,QAAQ,IAAID,EAAS,KAAK,EAG1BR,EAAYQ,EAAS,IAAI,EACzBJ,EAAK,SAAS,MAAM,MAAQ,GAI5C,CAAK,EAAE,MAAMM,GACT,CACI,QAAQ,IAAIA,CAAE,EACdD,EAAS,MAAM,CACH,QAAS,iBAAiBC,EAAG,OAAO,GACpC,SAAU,UAC9B,CAAiB,CACjB,CAAK,EAAE,QAAQ,IAAM,CACbP,EAAQ,MAAM,QAAU,MAChC,CAAK,EAEL,CAEAE,EAAU,iBAAiB,SAAUC,CAAQ"}