{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\nasync function getPicturesByQuery(query, pageNumber) {\n    const API_KEY = \"45032349-419aa61286db3245b797ba166\";\n\n     const response = await fetch(\n    `https://pixabay.com/api?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&per_page=15&page=${pageNumber}`\n  );\n\n  if (!response.ok) {\n    throw new Error(response.status);\n  }\n\n  return await response.json();\n    \n    \n//   return fetch(`https://pixabay.com/api?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true`).then(\n//     (res) => {\n//       if (!res.ok) {\n//         throw new Error(res.status); \n//       }\n//       return res.json();\n//     }\n//   );\n}\nexport default getPicturesByQuery;","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n// import iziToast from 'izitoast';\n// import 'izitoast/dist/css/iziToast.min.css';\n\nconst galleryEl = document.querySelector('.gallery');\nlet gallery;\nfunction createMarkup(arr) {\n  return arr\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n  <li class=\"gallery-item\">\n  <div class=\"overley-image\">\n    <a class=\"gallery-link\" href=\"${largeImageURL}\">\n      <img\n        class=\"gallery-image\"\n        src=\"${webformatURL}\" \n        alt=\"${tags}\"\n      />\n    </a>\n    </div>\n    <div class=\"info\">\n    <div class=\"info-detail\">\n        <h2 class=\"title\">Likes</h2>\n        <p class=\"text\">${likes}</p>\n    </div>\n    <div class=\"info-detail\">\n        <h2 class=\"title\">Views</h2>\n        <p class=\"text\">${views}</p>\n    </div>\n    <div class=\"info-detail\">\n        <h2 class=\"title\">Comments</h2>\n        <p class=\"text\">${comments}</p>\n    </div>\n    <div class=\"info-detail\">\n        <h2 class=\"title\">Downloads</h2>\n        <p class=\"text\">${downloads}</p>\n    </div>\n  </div>\n  </li>\n  `\n    )\n    .join('');\n}\nfunction drawGallery(images, isNextPage) {\n    if (!isNextPage)\n    {\n        if (gallery)\n            gallery.refresh();\n         galleryEl.innerHTML = '';\n    }\n\n\n  galleryEl.insertAdjacentHTML(isNextPage ? 'beforeend' : 'afterbegin', createMarkup(images));\n  gallery = new SimpleLightbox('.overley-image a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n}\n\nexport default drawGallery;","import getPicturesByQuery from \"./js/pixabay-api.js\";\nimport drawGallery from \"./js/render-functions.js\";\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst loading = document.querySelector('.loading');\nconst form = document.querySelector('.search-form');\nconst formNext = document.querySelector('.next-form');\n\nlet pageNumber = 1;\nlet searchText = '';\nasync function onSearch(evt) {\n    evt.preventDefault();\n    pageNumber = 1;\n    \n    const input = form.elements.query.value.trim().toLowerCase(); \n    searchText = input;\n    if (input != '') {\n        loading.style.display = 'block';\n    getPicturesByQuery(form.elements.query.value.toLowerCase(), pageNumber).then((responce) => {\n        {\n            if (responce.totalHits === 0) {\n            iziToast.error({\n                    message: \"Sorry, there are no images matching your search query. Please try again!\",\n                    position: 'topRight'\n                });\n        }\n            else {\n                drawGallery(responce.hits, false);\n                \n                formNext.style.display = 'block';\n          }     \n        }\n    \n    }).catch(ex =>\n    {\n        console.log(ex);\n        iziToast.error({\n                    message: `Server error: ${ex.message}`,\n                    position: 'topRight'\n                });\n    }).finally(() => {\n        loading.style.display = 'none';\n    })\n    }\n}\n\nasync function onSearchNext(evt) {\n    evt.preventDefault();\n    pageNumber++;\n    if (searchText != '') {\n        loading.style.display = 'block';\n        formNext.style.display = 'none';\n    getPicturesByQuery(searchText, pageNumber).then((responce) => {\n        {\n            if (responce.totalHits === 0) {\n            iziToast.error({\n                    message: \"Sorry, there are no images matching your search query. Please try again!\",\n                    position: 'topRight'\n                });\n        }\n            else {\n                drawGallery(responce.hits, true);                \n                formNext.style.display = 'block';\n                scroll();\n          }     \n        }\n    \n    }).catch(ex =>\n    {\n        console.log(ex);\n        iziToast.error({\n                    message: `Server error: ${ex.message}`,\n                    position: 'topRight'\n                });\n    }).finally(() => {\n        loading.style.display = 'none';\n    })\n    }\n}\nfunction scroll() {\n    const list = document.querySelector('li');\n    const height = list.getBoundingClientRect().height;\n    window.scrollBy({\n        top: height*2,\n        behavior: \"smooth\",\n    });\n}\nform.addEventListener('submit', onSearch);\nformNext.addEventListener('submit', onSearchNext);"],"names":["getPicturesByQuery","query","pageNumber","response","galleryEl","gallery","createMarkup","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","drawGallery","images","isNextPage","SimpleLightbox","loading","form","formNext","searchText","onSearch","evt","input","responce","iziToast","ex","onSearchNext","scroll","height"],"mappings":"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"}